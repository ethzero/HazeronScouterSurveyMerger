#!/usr/bin/env ruby

require 'erb'
require 'rexml/document'

if ARGV[0].nil?
	puts "sitemap_merger.rb takes one argument (sitemap.xml  you want to merge)"
	exit(1)
else
	@second_sitemap = ARGV[0] 
end

xml = File.read(@second_sitemap)
sitemap = REXML::Document.new(xml)

urls = []

sitemap.elements.each('urlset/url') do |url|
	urls.push(url)	
end


static_sitemap = ERB.new <<EOF
<?xml version="1.0" encoding="UTF-8"?>
<urlset
  xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
                      http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
 <url>
  <loc>http://www.spauldinghill.org/</loc>
  <lastmod>2010-09-19T15:57:42Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/</loc>
  <lastmod>2010-09-05T00:47:50Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottom_shadow.01.jpg</loc>
  <lastmod>2009-12-31T02:01:07Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.01.jpg</loc>
  <lastmod>2009-12-31T00:56:07Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.02.png</loc>
  <lastmod>2009-12-31T00:57:33Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.05.png</loc>
  <lastmod>2009-12-31T01:29:09Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.06.png</loc>
  <lastmod>2009-12-31T01:32:47Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.07.jpg</loc>
  <lastmod>2009-12-31T01:34:31Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.08.jpg</loc>
  <lastmod>2009-12-31T01:36:35Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.09.jpg</loc>
  <lastmod>2009-12-31T01:41:27Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.10.jpg</loc>
  <lastmod>2009-12-31T01:43:21Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.12.png</loc>
  <lastmod>2009-12-31T02:05:40Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.jpg</loc>
  <lastmod>2009-12-31T01:45:23Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshaddow.png</loc>
  <lastmod>2009-12-31T00:50:26Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshadow.03.png</loc>
  <lastmod>2009-12-31T01:01:14Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomdropshadow.04.png</loc>
  <lastmod>2009-12-31T01:03:15Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/bottomfooterdropshadow.png</loc>
  <lastmod>2010-09-05T00:47:50Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/contentbackground.png</loc>
  <lastmod>2009-12-28T07:03:41Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/contentbackground02.png</loc>
  <lastmod>2010-09-05T00:41:04Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/cornershadow.png</loc>
  <lastmod>2009-12-28T03:26:28Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.02.png</loc>
  <lastmod>2009-12-28T03:38:26Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.03.png</loc>
  <lastmod>2009-12-28T03:41:53Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.04.png</loc>
  <lastmod>2009-12-28T03:49:24Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.05.png</loc>
  <lastmod>2009-12-28T03:51:07Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.06.jpg</loc>
  <lastmod>2009-12-28T03:52:27Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.07.png</loc>
  <lastmod>2009-12-28T04:06:13Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/dropshaddow.png</loc>
  <lastmod>2009-12-27T08:03:51Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/sideshadow.01.png</loc>
  <lastmod>2009-12-28T04:11:14Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/sideshadow.png</loc>
  <lastmod>2009-12-27T23:15:10Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/spauldinghill_banner.01.jpg</loc>
  <lastmod>2009-11-18T05:14:55Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/Images/spauldinghill_banner.02.jpg</loc>
  <lastmod>2009-12-27T23:09:22Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/around_the_web.shtml</loc>
  <lastmod>2010-09-21T05:14:09Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/code/</loc>
  <lastmod>2010-10-22T16:34:13Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/code/apache.html</loc>
  <lastmod>2010-08-20T05:36:43Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/code/git.html</loc>
  <lastmod>2010-12-24T08:02:59Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/code/iphone.html</loc>
  <lastmod>2010-09-26T23:27:31Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/code/ssi.html</loc>
  <lastmod>2010-02-01T06:17:29Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/contact_us.html</loc>
  <lastmod>2010-09-20T06:10:34Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/default.css</loc>
  <lastmod>2011-06-27T06:45:52Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/default.js</loc>
  <lastmod>2010-09-20T05:56:34Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/footer.shtml</loc>
  <lastmod>2011-01-02T08:39:19Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/friends.html</loc>
  <lastmod>2010-09-21T05:20:11Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/header.shtml</loc>
  <lastmod>2011-07-03T06:32:50Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/noneie8.css</loc>
  <lastmod>2010-01-12T01:59:03Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/recipes/</loc>
  <lastmod>2010-09-20T06:09:57Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/recipes/pumpkincustard.html</loc>
  <lastmod>2010-11-02T07:24:58Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/recipes/strawberryspinach.html</loc>
  <lastmod>2010-02-01T00:17:46Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/site_template.html</loc>
  <lastmod>2010-01-20T17:15:36Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/</loc>
  <lastmod>2011-01-02T08:28:21Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/address_plotter/</loc>
  <lastmod>2011-01-02T08:41:24Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/address_plotter/README.md</loc>
  <lastmod>2011-01-02T08:19:00Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/address_plotter/address_plotter.css</loc>
  <lastmod>2011-01-02T08:36:37Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/address_plotter/address_plotter.js</loc>
  <lastmod>2011-01-02T08:19:00Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/address_plotter/jquery.min.js</loc>
  <lastmod>2011-01-02T08:19:00Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/images/</loc>
  <lastmod>2010-12-07T16:23:57Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/images/address_plotter.png</loc>
  <lastmod>2010-02-01T07:48:29Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/images/allsnippets_screenshot.png</loc>
  <lastmod>2010-12-07T16:16:13Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <url>
  <loc>http://www.spauldinghill.org/software/images/singlesnippet_screenshot.png</loc>
  <lastmod>2010-12-07T16:18:28Z</lastmod>
  <priority>0.5000</priority>
 </url>
 <% urls.each do |url| %>
	<%= url %>
 <% end %>
</urlset>
EOF

puts static_sitemap.result
